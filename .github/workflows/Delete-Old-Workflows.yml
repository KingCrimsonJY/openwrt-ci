name: Cleanup Old Runs

on:
  workflow_dispatch:
  schedule:
    - cron: '0 3 * * *'  # 每天 UTC 3:00 (北京时间 11:00)

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      # 清理 Workflow Runs - 每个 workflow 保留最近 3 次运行
      - name: Delete Old Workflow Runs
        uses: Mattraks/delete-workflow-runs@main
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          retain_days: 0
          keep_minimum_runs: 3
